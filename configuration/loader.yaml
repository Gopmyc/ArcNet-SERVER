# Path where all subloader scripts are located
SUBLOADERS_PATH:  "srcs/core/loader/subloaders/"

# Tables to store loaded resources grouped by type
RESSOURCES:       {}

# Defines the order in which resource groups should be loaded
LOAD_PRIORITY:
#  - "CLASSES"
  - "CORE"
#  - "MODULES"

LIBRARIES_PATH: "srcs/core/loader/libraries/"
LIBRARIES:
  ENV_BUILDER:  "env/builder.lua"
  ENV_LOADER:   "env/loader.lua"
  RESSOURCES:   "ressources.lua"
  FINDER:       "finder.lua"
  RUNTIME:      "runtime.lua"

RUNTIME:
  UPDATE:
    BOOTSTRAP:  1
    INGRESS:    2
    PROCESS:    3
    RESOLVE:    4
    EGRESS:     5
    OBSERVE:    6
  DRAW:
    PREPARE:    1
    EMIT:       2
    OVERLAY:    3
    INSPECT:    4

RULES_FILES:
  1:
    FIELD:  ROOT
    TYPE:   Table
  2:
    FIELD:  KEY
    TYPE:   String
  3:
    FIELD:  PATH
    TYPE:   String
  4:
    FIELD:  ARGS
    TYPE:   Table
  5:
    FIELD:  IS_BINARY
    TYPE:   Bool
  6:
    FIELD:  LOAD_SUBFOLDERS
    TYPE:   Bool
  7:
    FIELD:  SIDES
    TYPE:   Table
  8:
    FIELD:  SIDES.CLIENT
    TYPE:   Bool
  9:
    FIELD:  SIDES.SERVER
    TYPE:   Bool
  10:
    FIELD:  CAPABILITIES
    TYPE:   Table
  11:
    FIELD:  CAPABILITIES.SERVER
    TYPE:   Table
  12:
    FIELD:  CAPABILITIES.CLIENT
    TYPE:   Table
  13:
    FIELD:  CAPABILITIES.SHARED
    TYPE:   Table

SAFE_GLOBAL:
  # ┌───────────┐
  # │ CONSTANTS │
  # └───────────┘
  constants:
    SERVER:   true
    CLIENT:   true
    _VERSION: false
  # ┌───────────┐
  # │ FUNCTIONS │
  # └───────────┘
  functions:
    assert:       true
    error:        true
    ipairs:       true
    next:         true
    pairs:        true
    pcall:        true
    select:       true
    tonumber:     true
    tostring:     true
    type:         true
    unpack:       true
    xpcall:       true
    IsTable:      true
    IsNumber:     true
    IsUserdata:   true
    IsString:     true
    IsBool:       true
    IsFunction:   true
    IsThread:     true
    Color:        true
    MsgC:         true
    PrintTable:   true
    print:        true
    setmetatable: true
    getmetatable: false
  # ┌───────────┐
  # │ LIBRARIES │
  # └───────────┘
  libraries:
    math:       full
    string:     full
    os:
      time:     true
      date:     true
    table:
      insert:   true
      remove:   true
      sort:     true
      concat:   true
      copy:     true
  # ┌─────────────┐
  # │ NAME-SPACES │
  # └─────────────┘
  namespaces:
    ENV:
      exposed:  true
      readonly: false
  # ┌───────────┐
  # │ EXECUTION │
  # └───────────┘
  execution:
    load:       false
    loadstring: false
    dofile:     false
    loadfile:   false
    setfenv:    false
    getfenv:    false
  # ┌────────────┐
  # │ META-TABLE │
  # └────────────┘
  metatable:
    allow_string_meta: false
    allow_table_meta:  false
  # ┌──────────┐
  # │ FALLBACK │
  # └──────────┘
  fallback:
    global:           false
    error_on_missing: true
